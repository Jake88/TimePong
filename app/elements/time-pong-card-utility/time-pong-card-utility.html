<dom-module id="time-pong-card-utility">
  <script>
    (function() {
      'use strict';

      var _BOUNDS = {
        basic: 35,
        regular: 65,
        limited: 85,
        special: 97,
        rare: 100
      };

      Polymer.timePongUtility = Polymer({
        is: 'time-pong-card-utility',

        properties: {
          grandCardList: {
            type: Object
          },
          filteredCardList: {
            type: Object
          },
          lastFoundCard: {
            type: Object,
            value: function() {return {}}
          }
        },

        ready: function() {
          // TODO Fetch the card list from the db
          // this.grandCardList = db.allCards
          this.grandCardList = tempCardsArray(); // TODO Remove once we're getting it from filteredFunction
          // TODO Pluck out the card categories that don't match the user's config
          // this.filteredCardList = filterUnwantedDecks(this.grandCardList, user.config)
          this.filteredCardList = tempCardsArray(); // TODO Remove once we're getting it from filteredFunction
        },

        getGrandList: function() {
          return _.cloneDeep(this.grandCardList);
        },

        /*
        @getRandomCard
        filters: {
          isSpellActive: Boolean
            whether a spell card is currently in play.
          isDrinking: Boolean
            Yay or nay
          restrictTo: String
            Whether we restrict the card type being found to a particular type ie. 'action' or 'curse'
        }
       */
        getRandomCard: function(filters) {
          var result =  Math.random() * 100;

          // First we set up filters.
          filters = filters || {};
          filters.previousCard = this.lastFoundCard;
          filters.restrictTo = filters.restrictTo || this.lastFoundCard.restrict;

          // Add a rarity filter
          // Special check to see if we draw a basic card.
          if (result < _BOUNDS.basic && _.get(this.lastFoundCard, 'rarity') !== 'basic') {
            filters.rarity = 'basic';
          } else if(result < _BOUNDS.regular) {
            filters.rarity = 'regular';
          } else if(result < _BOUNDS.limited) {
            filters.rarity = 'limited';
          } else if(result < _BOUNDS.special) {
            filters.rarity = 'special';
          } else if(result < _BOUNDS.rare) {
            filters.rarity = 'rare';
          } else {
            // Should never happen, but if we find no card, just spit out the basic.
            filters.rarity = 'basic';
          }

          console.log('filters', filters);

          this.lastFoundCard = getRandomArrayItem(getValidCards(this.filteredCardList, filters));
          return this.lastFoundCard;
        }
      });

      function getValidCards(cards, filters) {
        // For debugging purposes. Grab a specific card.
        if (filters.id) {
          return _.where(cards, {id: filters.id});
        }
        var filteredCards =  _.filter(cards, function(card) {
          if (filters.rarity !== card.rarity) {
            return false;
          }

          if (filters.isDrinking && !card.forDrinkers) {
            return false;
          }

          if (!filters.isDrinking && !card.forNonDrinkers) {
            return false;
          }

          if (filters.restrictTo && card.type !== filters.restrictTo) {
            return false;
          }

          // Is a spell card currently in play. If so, remove all other spells.
          if (filters.isSpellActive && card.type === 'spell') {
            return false;
          }

          // Finally return false if the card matches the previous card drawn.
          return card !== filters.previousCard;
        });

        console.log(filteredCards);

        return filteredCards;
      }

      function getRandomArrayItem(array) {
        var length = array ? array.length : 0;
        var index = Math.floor(Math.random() * length);
        return array[index];
      }

      function tempCardsArray() {

        //Card definition
        /*
        {
          creator: Plain string - who created the idea for this card

          created: Date created

          forDrinkers: Boolean - if this card should appear for drinkers (Optional)

          forNonDrinkers: Boolean - if this card should appear for non-drinkers (Optional)

          deck: String - The deck / set / expansion that this card came from
                [core, W&W, popCulture, nudity, orgasmic]

          rarity: String - the rarity level of this card
                [basic(Do not edit these), regular, limited, special, rare]

          type: String - The type of card
                [action, challenge, spell, curse, trait, dare, ability, global]

          duration: Number - If the card should last for X rounds, primarily for use with Spells. (Optional)

          title: String - The title of the card. Limited to X characters

          flavour: String - humerous flavour text for the card, themed around the card name or rules (Optional)

          rules: Array[String] - List of instructions to do for the card (Optional)

          primaryRule: {
            //TODO: NOTE Drinking Rule restrictions:
            //    Only ONE primary rule can be applied.
            //    ONLY ONE secondary rule can be applied of each drinkStatus (hideFromDrinkers / nonDrinkers must be set on BOTH
            //        secondary rules for them to be applied, otherwise only one can be set.)

            hideFromDrinkers: Boolean - hide if this rule shouldn't be seen for drinkers
            hideFromNonDrinkers: Boolean - hide if this rule shouldn't be seen for non drinkers
            type: String - What type of rule is this
                  [Mandatory, success, failure, conditional, dare, truth]
            value: String - How many drinks, or the action that needs to be performed (eg: two, or skull, or fetch)
            action: String - What the rule is
                  [drink, skull, fetch, perform, remove?(clothes)]
            person: String - Who this rule applies to
                  [you, someone, everyone]
            description: Array[String] - A brief description/instruction of the rule (ie: choose someone, everyone wearing X)
          }

          secondaryRule: { TODO: Convert this to an array so we can have 2 secondary rules MAX on a card.
            ^^^^ same as primary rule.
          }
        }
         */

        return [
          // ------------- BASIC
          {
            creator: 'Jake Turner',
            created: '08/05/2016',
            forDrinkers: true,
            deck: 'W&W',
            rarity: 'basic',
            type: 'action',
            title: 'The Witch\'s cauldron',
            flavour: 'One toad\'s tongue with an owl\'s lung. Three cigarette butts and two squirrel nuts. Brew them for a bit, then skull that shit.',
            rules: ['If The Witch\'s Cauldron does not exist, create it by placing an empty cup in the middle.',
              'Pour two shots of your drink into the cauldron.'],
            primaryRule: {
              type: 'conditional',
              value: 'skull',
              action: 'skull',
              person: 'you',
              description: ['If the cauldron is full, skull it.']
            }
          },
          {
            creator: 'Jake Turner',
            created: '08/05/2016',
            forNonDrinkers: true,
            deck: 'core',
            rarity: 'basic',
            type: 'action',
            title: 'Fetch!',
            flavour: 'Who\'s a good doggy? You\'re a good doggy!',
            rules: ['Pass the cup to your left, play continues while you\'re gone.'],
            primaryRule: {
              type: 'conditional',
              value: 'fetch',
              action: 'fetch',
              person: 'you',
              description: ['If anyone wants a drink, you fetch it.']
            }
          },
          // ------------ regular
          {
            creator: 'Jake Turner',
            created: '08/05/2016',
            forDrinkers: true,
            deck: 'core',
            rarity: 'regular',
            type: 'action',
            title: 'Sharing is caring',
            flavour: 'Nobody wants to drink alone.',
            rules: [],
            primaryRule: {
              type: 'mandatory',
              value: 'one',
              action: 'drink',
              person: 'you',
              description: ['You drink.']
            },
            secondaryRule: {
              type: 'mandatory',
              value: 'one',
              action: 'drink',
              person: 'someone',
              description: ['Choose a friend to share your losing experience.']
            }
          },
          {
            creator: 'Jake Turner',
            created: '08/05/2016',
            forDrinkers: true,
            deck: 'Core',
            rarity: 'regular',
            type: 'action',
            drinkValue: '1',
            title: 'Drink!',
            rules: [],
            primaryRule: {
              type: 'mandatory',
              value: 'one',
              action: 'drink',
              person: 'you',
              description: ['Drink.']
            }
          },
          {
            creator: 'Jake Turner',
            created: '08/05/2016',
            forDrinkers: true,
            deck: 'core',
            rarity: 'regular',
            type: 'action',
            drinkValue: '2',
            title: 'Drink!',
            rules: [],
            primaryRule: {
              type: 'mandatory',
              value: 'two',
              action: 'drink',
              person: 'you',
              description: ['Drink.']
            }
          },
          {
            creator: 'Jake Turner',
            created: '08/05/2016',
            forDrinkers: true,
            deck: 'core',
            rarity: 'regular',
            type: 'action',
            drinkValue: '2',
            title: 'Dodged a bullet',
            flavour: 'Phew.. That was close.',
            rules: [],
            primaryRule: {
              type: 'mandatory',
              value: 'two',
              action: 'drink',
              person: 'someone',
              description: ['Allocate drinks to someone else.']
            }
          },
          {
            creator: 'Jake Turner',
            created: '08/05/2016',
            forDrinkers: true,
            deck: 'core',
            rarity: 'regular',
            type: 'action',
            drinkValue: '2',
            title: 'Give and take',
            rules: [],
            flavour: 'You\'re going down, but at least you\'re taking someone with you.',
            primaryRule: {
              type: 'mandatory',
              value: 'one',
              action: 'drink',
              person: 'someone',
              description: ['Give one.']
            },
            secondaryRule: {
              type: 'mandatory',
              value: 'two',
              action: 'drink',
              person: 'you',
              description: ['Take two.']
            }
          },
          {
            creator: 'Jake Turner',
            created: '08/05/2016',
            forDrinkers: true,
            deck: 'core',
            rarity: 'regular',
            type: 'challenge',
            title: 'Trick shot',
            rules: ['Take a shot, bouncing the ball off the wall, ceiling, floor or other ’tricky’ surface.'],
            flavour: 'Bend it like Beckham.',
            primaryRule: {
              type: 'success',
              value: 'skull',
              action: 'skull',
              person: 'someone',
              description: ['Choose someone to skull.']
            },
            secondaryRule: {
              type: 'failure',
              value: 'one',
              action: 'drink',
              person: 'you',
              description: ['You drink.']
            }
          },
          {
            creator: 'Jake Turner',
            created: '08/05/2016',
            forDrinkers: true,
            deck: 'core',
            rarity: 'regular',
            type: 'action',
            title: 'Return to sender',
            flavour: 'Must have got lost in transit.',
            rules: ['Return the ball and cup to the person who passed it to you this round.'],
            primaryRule: {
              type: 'mandatory',
              value: 'two',
              action: 'drink',
              person: 'someone',
              description: ['That person drinks.']
            },
            secondaryRule: {
              type: 'conditional',
              value: 'skull',
              action: 'skull',
              person: 'you',
              description: ['If no one passed it to you this round, skull your drink.']
            }
          },
          {
            creator: 'Jake Turner',
            created: '08/05/2016',
            forNonDrinkers: true,
            forDrinkers: true,
            deck: 'W&W',
            rarity: 'regular',
            type: 'trait',
            title: 'The Wizard\'s hat',
            flavour: 'With great power, comes great responsibility.',
            rules: ['You don the wizard’s hat.',
              'If there are any disputes on rules or who had the cup when the timer went off, you decide.'],
            primaryRule: {
              hideFromNonDrinkers: true,
              type: 'mandatory',
              value: 'one',
              action: 'drink',
              person: 'you',
              description: ['Drink.']
            }
          },
          {
            creator: 'Jake Turner',
            created: '08/05/2016',
            forNonDrinkers: true,
            deck: 'core',
            rarity: 'regular',
            type: 'action',
            title: 'Moosic to our ears',
            flavour: 'Don\'t have a cow, man.',
            primaryRule: {
              type: 'mandatory',
              value: 'perform',
              action: 'perform',
              person: 'you',
              description: ['Give us your best bovine imitation.']
            }
          },
          {
            creator: 'Jake Turner',
            created: '08/05/2016',
            forNonDrinkers: true,
            deck: 'core',
            rarity: 'regular',
            type: 'action',
            title: 'Give',
            flavour: 'With some people it\'s all take and no give. But not you! You\'re the generous type.',
            primaryRule: {
              type: 'mandatory',
              value: 'two',
              action: 'drink',
              person: 'someone',
              description: ['Choose someone to drink.']
            }
          },
          {
            creator: 'Jake Turner',
            created: '08/05/2016',
            forDrinkers: true,
            forNonDrinkers: true,
            deck: 'core',
            rarity: 'regular',
            type: 'ability',
            title: 'You\'re so nosey!',
            rules: ['At any time you may choose to put your finger on your nose.',
              'Abilities have a one time use.'],
            flavour: 'Stop sticking your nose where it doesn\'t belong.',
            primaryRule: {
              type: 'punishment',
              value: 'skull',
              action: 'skull',
              person: 'someone',
              description: ['The last person to match you drinks.']
            },
            secondaryRule: {
              hideFromNonDrinkers: true,
              type: 'mandatory',
              value: 'one',
              action: 'drink',
              person: 'you',
              description: ['Drink.']
            }
          },
          {
            creator: 'Jake Turner',
            created: '08/05/2016',
            forDrinkers: true,
            forNonDrinkers: true,
            deck: 'W&W',
            rarity: 'regular',
            type: 'curse',
            title: 'The Witch\'s curse',
            rules: ['Create a curse of your choosing.',
              'Curse effects remain until another curse is drawn.',
              'If anyone breaks the curse they drink.'],
            primaryRule: {
              hideFromNonDrinkers: true,
              type: 'mandatory',
              value: 'one',
              action: 'drink',
              person: 'you',
              description: ['Drink.']
            }
          },
          {
            creator: 'Jake Turner',
            created: '08/05/2016',
            forDrinkers: true,
            forNonDrinkers: true,
            deck: 'W&W',
            rarity: 'regular',
            type: 'curse',
            title: 'A girl has no name', // Rename this?
            rules: ['You cannot use the real or abbreviated name of anyone in the group.',
              'Curse effects remain until another curse is drawn.',
              'If anyone breaks the curse they drink.'],
            primaryRule: {
              hideFromNonDrinkers: true,
              type: 'mandatory',
              value: 'one',
              action: 'drink',
              person: 'you',
              description: ['Drink.']
            }
          },
          {
            creator: 'Jake Turner',
            created: '08/05/2016',
            forDrinkers: true,
            forNonDrinkers: true,
            deck: 'W&W',
            rarity: 'regular',
            type: 'curse',
            title: 'Orgasmic',
            rules: ['Before each drink, moan like you mean it.',
              'Curse effects remain until another curse is drawn.',
              'If anyone breaks the curse they drink.'],
            primaryRule: {
              hideFromNonDrinkers: true,
              type: 'mandatory',
              value: 'one',
              action: 'drink',
              person: 'you',
              description: ['Drink.']
            }
          },
          {
            creator: 'Jake Turner',
            created: '08/05/2016',
            forDrinkers: true,
            forNonDrinkers: true,
            deck: 'W&W',
            rarity: 'regular',
            type: 'curse',
            title: 'What’s the point?',
            rules: ['You cannot point with your fingers.',
              'Curse effects remain until another curse is drawn.',
              'If anyone breaks the curse they drink.'],
            primaryRule: {
              hideFromNonDrinkers: true,
              type: 'mandatory',
              value: 'one',
              action: 'drink',
              person: 'you',
              description: ['Drink.']
            }
          },
          {
            creator: 'Jake Turner',
            created: '08/05/2016',
            forDrinkers: true,
            deck: 'core',
            rarity: 'regular',
            type: 'trait',
            title: 'Lovers\' lane',
            rules: ['Choose someone to love and sit next to them.', // Need to do some refactoring of trait cards
              'Whenever one drinks, so does the other.',
              'You remain lovers until Lovers’ Lane is drawn again.'],
            primaryRule: {
              hideFromNonDrinkers: true,
              type: 'mandatory',
              value: 'two',
              action: 'drink',
              person: 'you',
              description: ['Drink.']
            }
          },
          // ------------ limited
          {
            creator: 'Jake Turner',
            created: '08/05/2016',
            forDrinkers: true,
            forNonDrinkers: true,
            deck: 'W&W',
            rarity: 'limited',
            type: 'spell',
            duration: 3,
            title: 'Lead Cup',
            rules: ['You may only pass to the person on your left.',
              'This effect leaves play when the spell expires.'],
            primaryRule: {
              hideFromNonDrinkers: true,
              type: 'mandatory',
              value: 'two',
              action: 'drink',
              person: 'you',
              description: ['Drink.']
            }
          },
          {
            creator: 'Jake Turner',
            created: '08/05/2016',
            forDrinkers: true,
            deck: 'core',
            rarity: 'limited',
            type: 'action',
            title: 'Drink!',
            rules: [],
            primaryRule: {
              type: 'mandatory',
              value: 'three',
              action: 'drink',
              person: 'you',
              description: ['Drink.']
            }
          },
          {
            creator: 'Jake Turner',
            created: '08/05/2016',
            deck: 'core',
            forNonDrinkers: true,
            rarity: 'limited',
            type: 'action',
            title: 'Drop and gimme',
            primaryRule: {
              type: 'mandatory',
              value: 'five',
              action: 'perform',
              person: 'you',
              description: ['Perform push ups.']
            }
          },
          {
            creator: 'Jake Turner',
            created: '08/05/2016',
            forDrinkers: true,
            forNonDrinkers: true,
            deck: 'W&W',
            rarity: 'limited',
            type: 'spell',
            duration: 3,
            title: 'Rewind',
            rules: ['Instead of passing left, pass to the right.',
              'This effect leaves play when the spell expires.'],
            primaryRule: {
              hideFromNonDrinkers: true,
              type: 'mandatory',
              value: 'two',
              action: 'drink',
              person: 'you',
              description: ['Drink.']
            }
          },
          {
            creator: 'Jake Turner',
            created: '08/05/2016',
            forDrinkers: true,
            forNonDrinkers: true,
            deck: 'W&W',
            rarity: 'limited',
            type: 'spell',
            duration: 3,
            title: 'Free throws',
            rules: ['Move the cup to the middle.',
              'Players must shoot the ball in without bouncing.',
              'This effect leaves play when the spell expires.'],
            primaryRule: {
              hideFromNonDrinkers: true,
              type: 'mandatory',
              value: 'two',
              action: 'drink',
              person: 'you',
              description: ['Drink.']
            }
          },
          {
            creator: 'Jake Turner',
            created: '08/05/2016',
            forDrinkers: true,
            deck: 'core',
            rarity: 'limited',
            type: 'action',
            title: 'Redemption',
            rules: ['You have one shot to redeem yourself.'],
            flavour: 'Careful now. You risk bringing shame upon your family.',
            primaryRule: {
              type: 'conditional',
              value: 'skull',
              action: 'skull',
              person: 'you',
              description: ['If you miss, finish your drink.']
            }
          },
          {
            creator: 'Jake Turner',
            created: '08/05/2016',
            forDrinkers: true,
            deck: 'core',
            rarity: 'limited',
            type: 'action',
            title: 'You\'re doing it wrong',
            rules: ['Drink from the opposite side of the cup.',
              '( Place your lips on the far side of the cup. Tilt your head forward until you can take your drink. )'],
            primaryRule: {
              type: 'mandatory',
              value: 'two',
              action: 'drink',
              person: 'you',
              description: ['Drink.']
            }
          },
          {
            creator: 'Jake Turner',
            created: '08/05/2016',
            forDrinkers: true,
            deck: 'core',
            rarity: 'limited',
            type: 'action',
            title: 'Rehydrate',
            rules: ['Slow down, cowboy. You’re looking a little tipsy!',
              'Get excluded from rounds while you drink a glass of water.'],
            flavour: 'Remember kids, always drink responsibly.'
          },
          {
            creator: 'Jake Turner',
            created: '08/05/2016',
            forDrinkers: true,
            deck: 'core',
            rarity: 'limited',
            type: 'global',
            title: 'Tops are red, pants are blue',
            rules: ['Anyone wearing these, drinks with you'],
            flavour: 'Lookout! It\'s the fashion police',
            primaryRule: {
              type: 'mandatory',
              value: 'three',
              action: 'drink',
              person: 'you',
              description: ['Drink.']
            },
            secondaryRule: {
              type: 'mandatory',
              value: 'three',
              action: 'drink',
              person: 'everyone',
              description: ['Anyone wearing a red top or blue pants, drinks.']
            }
          },
          {
            creator: 'Dejan and Dragana',
            created: '08/05/2016',
            forDrinkers: true,
            deck: 'core',
            rarity: 'limited',
            type: 'challenege',
            title: 'A hole in one',
            rules: ['Place the cup on the ground on it\'s side. Step back.',
              'You have one shot to Putt the ball in using your foot.'],
            primaryRule: {
              type: 'success',
              value: 'skull',
              action: 'skull',
              person: 'someone',
              description: ['Choose someone.']
            },
            secondaryRule: {
              type: 'failure',
              value: 'three',
              action: 'drink',
              person: 'you',
              description: ['Drink.']
            }
          },
          {
            creator: 'Jake Turner',
            created: '08/05/2016',
            forNonDrinkers: true,
            forDrinkers: true,
            deck: 'core',
            rarity: 'limited',
            type: 'action',
            drinkValue: '2',
            title: 'You\'re a Belieber',
            flavour: 'Let\'s hope you have the voice of an angel',
            primaryRule: {
              type: 'mandatory',
              value: 'sing',
              action: 'perform',
              person: 'you',
              description: ['Sing the chorus of any Justin Bieber song.']
            },
            secondaryRule: {
              hideFromNonDrinkers: true,
              type: 'mandatory',
              value: 'two',
              action: 'drink',
              person: 'you',
              description: ['Drink.']
            }
          },
          {
            creator: 'Jake Turner',
            created: '08/05/2016',
            forDrinkers: true,
            forNonDrinkers: true,
            deck: 'W&W',
            rarity: 'limited',
            type: 'spell',
            duration: 3,
            restrict: 'action',
            title: 'Three\'s a crowd',
            rules: ['Adjacent players receive a ball.',
              'When all three balls have been sunk, pass the cup to anyone.',
              'Once time’s up, all three perform the action',
              'This effect leaves play when the spell expires.'],
            primaryRule: {
              type: 'mandatory',
              value: 'two',
              action: 'drink',
              person: 'you',
              description: ['Drink']
            }
          },
          {
            creator: 'Jake Turner',
            created: '08/05/2016',
            forDrinkers: true,
            forNonDrinkers: true,
            deck: 'W&W',
            rarity: 'limited',
            type: 'spell',
            duration: 3,
            title: 'Multiball',
            rules: ['Add one ball to the game.',
              'Once the player has sunk both balls, they may pass to anyone.',
              'This effect leaves play when the spell expires.'],
            primaryRule: {
              type: 'mandatory',
              value: 'two',
              action: 'drink',
              person: 'you',
              description: ['Drink']
            }
          },
          {
            creator: 'Jake Turner',
            created: '08/05/2016',
            forDrinkers: true,
            forNonDrinkers: true,
            deck: 'W&W',
            rarity: 'limited',
            type: 'spell',
            duration: 3,
            drinkValue: '2',
            title: 'The gatekeeper',
            rules: ['You are the Gatekeeper.',
              'When you sink the ball, you may pass to anyone.',
              'Other players may only pass to you.',
              'This effect leaves play when the spell expires.'],
            primaryRule: {
              type: 'mandatory',
              value: 'two',
              action: 'drink',
              person: 'you',
              description: ['Drink']
            }
          },
          {
            creator: 'Jake Turner',
            created: '08/05/2016',
            forDrinkers: true,
            forNonDrinkers: true,
            deck: 'W&W',
            rarity: 'limited',
            limit: 'action',
            type: 'spell',
            duration: 3,
            title: 'Double or nothing',
            rules: ['Add another ball and cup.',
              'The cups start at opposite players.',
              'When the timer ends, both players do the action',
              'This effect leaves play when the spell expires.'],
            primaryRule: {
              type: 'mandatory',
              value: 'two',
              action: 'drink',
              person: 'you',
              description: ['Drink']
            }
          },
          {
            creator: 'Jake Turner',
            created: '08/05/2016',
            forDrinkers: true,
            forNonDrinkers: true,
            deck: 'core',
            rarity: 'limited',
            limit: 'action',
            restrict: 'action',
            type: 'action',
            title: 'Delay the inevitable',
            rules: ['Only drinkers should participate next round',
              'Double the values of the card drawn next']
          },

          // ------------ special
          {
            creator: 'Jake Turner',
            created: '08/05/2016',
            deck: 'core',
            forDrinkers: true,
            rarity: 'special',
            type: 'action',
            title: 'The sipping sit up',
            primaryRule: {
              type: 'mandatory',
              value: 'three',
              action: 'perform',
              person: 'you',
              description: ['Perform sit ups.']
            },
            secondaryRule: {
              type: 'mandatory',
              value: 'three',
              action: 'drink',
              person: 'you',
              description: ['While doing each sit up, drink.']
            }
          },
          {
            creator: 'Jake Turner',
            created: '08/05/2016',
            forDrinkers: true,
            forNonDrinkers: true,
            deck: 'core',
            rarity: 'special',
            type: 'dare',
            title: 'Twerk it like Miley',
            flavour: 'Shake it. Sh-sh-sh-shake it. Shake it like a polaroid picture.',
            rules: ['Stand up and face away.',
              'Make Miley proud.'],
            primaryRule: {
              hideFromNonDrinkers: true,
              type: 'chicken',
              value: 'skull',
              action: 'skull',
              person: 'you',
              description: ['If you\'re too chicken to dare, drink.']
            },
            secondaryRule: {
              hideFromDrinkers: true,
              type: 'chicken',
              value: 'truth',
              action: 'truth',
              person: 'you',
              description: ['If you\'re too chicken to dare, have you ever tried to twerking?']
            }
          },
          {
            creator: 'Jake Turner',
            created: '08/05/2016',
            forDrinkers: true,
            deck: 'core',
            rarity: 'special',
            type: 'action',
            title: 'Skull',
            flavour: '\'Cause fuck you and fuck your liver, that\'s why.',
            primaryRule: {
              type: 'mandatory',
              value: 'skull',
              action: 'skull',
              person: 'you',
              description: ['No explanation needed.']
            }
          },
          {
            creator: 'Jake Turner',
            created: '08/05/2016',
            forDrinkers: true,
            deck: 'core',
            rarity: 'special',
            type: 'action',
            title: 'Take one for the team',
            flavour: 'Your heroic efforts won\'t be forgotten... until this is drawn again.',
            primaryRule: {
              type: 'mandatory',
              value: 'x',
              action: 'drink',
              person: 'you',
              description: ['Take a drink for each person playing.']
            }
          },
          {
            creator: 'Jake Turner',
            created: '08/05/2016',
            forDrinkers: true,
            forNonDrinkers: true,
            deck: 'core',
            rarity: 'special',
            type: 'ability',
            title: 'Get out of jail free',
            rules: ['Use this ability to get out of a rule on any card',
              'Abilities have a one time use.']
          },
          {
            creator: 'Jake Turner',
            created: '08/05/2016',
            forDrinkers: true,
            deck: 'core',
            rarity: 'special',
            type: 'action',
            title: 'Thirsty',
            rules: ['Fill your drink and sit out the following round.'],
            primaryRule: {
              type: 'mandatory',
              value: 'X',
              action: 'drink',
              person: 'you',
              description: ['When the timer starts, start drinking.',
                'Only stop when the timer rings, or you have finished your drink.']
            }
          },
          {
            creator: 'Jake Turner',
            created: '08/05/2016',
            forDrinkers: true,
            deck: 'popCulture',
            rarity: 'special',
            type: 'challenge',
            title: 'Mmmm, Spicey!',
            rules: ['You have 5 seconds.',
              'Name the five spice girls.'],
            flavour: 'Yo, I\'ll tell you what I want, what I really really want. I wanna really really really wanna see you skull, ha.',
            primaryRule: {
              type: 'success',
              value: 'five',
              action: 'drink',
              person: 'everyone',
              description: ['Drink five as a tribute to the girls.']
            },
            secondaryRule: {
              type: 'failure',
              value: 'skull',
              action: 'skull',
              person: 'you',
              description: ['Drink.']
            }

          },
          {
            creator: 'Jake Turner',
            created: '08/05/2016',
            forDrinkers: true,
            deck: 'core',
            rarity: 'special',
            type: 'challenge',
            title: 'Kobe!',
            rules: ['Put the cup on the opposite side, away from you.',
              'Take a shot, no bouncing.'],
            primaryRule: {
              type: 'success',
              value: 'two',
              action: 'drink',
              person: 'everyone',
              description: ['You must be Kobe Bryant and everybody else drinks in your name.']
            },
            secondaryRule: {
              type: 'failure',
              value: 'skull',
              action: 'skull',
              person: 'you',
              description: ['Drink.']
            }
          },
          {
            creator: 'Jake Turner',
            created: '08/05/2016',
            forDrinkers: true,
            forNonDrinkers: true,
            deck: 'core',
            rarity: 'special',
            type: 'dare',
            title: 'Smooches',
            rules: ['Kiss the person next to you on the lips.'],
            flavour: 'Pucker up. This one could be sloppy!',
            primaryRule: {
              hideFromNonDrinkers: true,
              type: 'chicken',
              value: 'skull',
              action: 'skull',
              person: 'you',
              description: ['If you\'re too chicken to dare, drink.']
            },
            secondaryRule: {
              hideFromDrinkers: true,
              type: 'chicken',
              value: 'truth',
              action: 'truth',
              person: 'you',
              description: ['If you\'re too chicken to dare, where\'s the strangest place you\'ve made out?']
            }
          },
          {
            creator: 'Jake Turner',
            created: '08/05/2016',
            forDrinkers: true,
            deck: 'W&W',
            rarity: 'rare',
            type: 'action',
            title: 'The witch\'s potion',
            rules: ['The three people to your left each pour a portion of their drink into one cup.',
              'Top it up with your own drink.'],
            flavour: '',
            primaryRule: {
              type: 'mandatory',
              value: 'skull',
              action: 'skull',
              person: 'you',
              description: ['Drink.']
            }
          },
          {
            creator: 'Jake Turner',
            created: '08/05/2016',
            forDrinkers: true,
            deck: 'core',
            rarity: 'rare',
            type: 'global',
            flavour: 'I\'m not really racist. I want to wreck you all equally.',
            title: 'That\'s just racist.',
            primaryRule: {
              type: 'mandatory',
              value: 'skull',
              action: 'skull',
              person: 'everyone',
              description: ['You, and anyone matching your skin colour, skulls their drink.']
            }
          },
          {
            creator: 'Jake Turner',
            created: '08/05/2016',
            forDrinkers: true,
            deck: 'core',
            rarity: 'rare',
            type: 'action',
            title: 'Our friend, Sharon',
            flavour: 'Did you hear about what our friend Sharon did with her friend Cory in the chicken shed last Christmas? I hear there were cocks involved!',
            primaryRule: {
              type: 'conditional',
              value: 'one',
              action: 'drink',
              person: 'you',
              description: ['Drink if you know a Sharon.']
            },
            secondaryRule: {
              type: 'conditional',
              value: 'skull',
              action: 'skull',
              person: 'you',
              description: ['Skull if you don\'t.']
            }
          },
          {
            creator: 'Jake Turner',
            created: '08/05/2016',
            forNonDrinkers: true,
            deck: 'core',
            rarity: 'rare',
            type: 'action',
            title: 'Now that\'s hot!',
            flavour: 'Things are really starting to heat up now.',
            rules: ['Find and bite a hot chilli.',
              'If no chilli can be found, take a sip of hot sauce.',
              'If no hot sauce exists, share a hot story from your past.']
          },
          {
            creator: 'Jake Turner',
            created: '08/05/2016',
            forNonDrinkers: true,
            deck: 'core',
            rarity: 'rare',
            type: 'action',
            title: 'Host\'s most gross',
            flavour: 'Delicious AND nutritious.',
            rules: ['The host of the house gets to choose something from their cupboard.',
              'Take a bite of it.']
          },
          {
            creator: 'Jake Turner',
            created: '08/05/2016',
            forDrinkers: true,
            deck: 'core',
            rarity: 'rare',
            type: 'action',
            drinkValue: 'S',
            title: 'Two grills, one cup',
            rules: ['Pick another person and combine drinks to fill a cup.'],
            primaryRule: {
              type: 'mandatory',
              value: 'skull',
              action: 'skull',
              person: 'you',
              description: ['Both of you skull by drinking from the cup at the same time.']
            }
          },
          {
            creator: 'Jake Turner',
            created: '08/05/2016',
            forDrinkers: true,
            deck: 'core',
            rarity: 'rare',
            type: 'global',
            title: 'Waterfall',
            rules: ['Everyone refill their cups before the next round starts.'],
            primaryRule: {
              type: 'mandatory',
              value: 'x',
              action: 'drink',
              person: 'you',
              description: ['When the round starts, everyone must start drinking.',
                'Continue drinking through the round until the timer stops (even if you control a ball).']
            }
          },
          {
            creator: 'Jake Turner',
            created: '08/05/2016',
            forDrinkers: true,
            deck: 'core',
            rarity: 'rare',
            type: 'global',
            title: 'No mercy',
            flavour: 'You\'re drunk, and you\'re drunk. You\'re also drunk. And you, you\'re extra drunk.',
            primaryRule: {
              type: 'mandatory',
              value: 'skull',
              action: 'skull',
              person: 'everyone',
              description: ['Everyone skulls.']
            },
            secondaryRule: {
              type: 'conditional',
              value: 'skull',
              action: 'skull',
              person: 'someone',
              description: ['The last person to finish their drink, skulls another.']
            }
          }
        ];
      }
    })();
  </script>
</dom-module>
