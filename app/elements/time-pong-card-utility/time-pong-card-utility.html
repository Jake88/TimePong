<link rel="import" href="./truth-list.html">
<link rel="import" href="../time-pong-constant-behaviors/time-pong-constant-behaviors.html">

<dom-module id="time-pong-card-utility">
  <template>
    <truth-list id="truthList"></truth-list>
  </template>
  <script>
    (function() {
      'use strict';

      var _BOUNDS = {
        basic: 35,
        regular: 65,
        limited: 85,
        special: 97,
        rare: 100
      };

      Polymer({
        is: 'time-pong-card-utility',
        behaviors: [ConstantsBehavior],

        properties: {
          grandCardList: {
            type: Object
          },
          filteredCardList: {
            type: Object
          },
          lastFoundCard: {
            type: Object,
            value: function() {return {}}
          }
        },

        ready: function() {
          // TODO Fetch the card list from the db
          // this.grandCardList = db.allCards
          this.grandCardList = tempCardsArray(); // TODO Remove once we're getting it from filteredFunction
          // TODO Pluck out the card categories that don't match the user's config
          // this.filteredCardList = filterUnwantedDecks(this.grandCardList, user.config)
          this.filteredCardList = tempCardsArray(); // TODO Remove once we're getting it from filteredFunction
        },

        getGrandList: function() {
          return _.cloneDeep(this.grandCardList);
        },

        /*
        @getRandomCard
        filters: {
          isSpellActive: Boolean
            whether a spell card is currently in play.
          isDrinking: Boolean
            Yay or nay
          restrictTo: String
            Whether we restrict the card type being found to a particular type ie. 'action' or 'curse'
        }
       */
        getRandomCard: function(filters) {
          var result =  Math.random() * 100;

          // First we set up filters.
          filters = filters || {};
          filters.previousCard = this.lastFoundCard;
          filters.restrictTo = filters.restrictTo || this.lastFoundCard.restrict;

          // Add a rarity filter
          // Special check to see if we draw a basic card.
          if (result < _BOUNDS.basic && _.get(this.lastFoundCard, 'rarity') !== 'basic') {
            filters.rarity = 'basic';
          } else if(result < _BOUNDS.regular) {
            filters.rarity = 'regular';
          } else if(result < _BOUNDS.limited) {
            filters.rarity = 'limited';
          } else if(result < _BOUNDS.special) {
            filters.rarity = 'special';
          } else if(result < _BOUNDS.rare) {
            filters.rarity = 'rare';
          } else {
            // Should never happen, but if we find no card, just spit out the basic.
            filters.rarity = 'basic';
          }

          this.lastFoundCard = getRandomArrayItem(getValidCards(this.filteredCardList, filters));

          if(this.lastFoundCard.type === 'dare') {
            var truth = this.$.truthList.getTruth();
            _.forEach(this.lastFoundCard.boldRules, function(rule) {
              if (rule.type === 'chicken') {
                rule.instruction = truth;
              }
            });
          }

          return this.lastFoundCard;
        }
      });

      function getValidCards(cards, filters) {
        // For debugging purposes. Grab a specific card.
        if (filters.id) {
          return _.where(cards, {id: filters.id});
        }
        var filteredCards =  _.filter(cards, function(card) {
          if (filters.rarity !== card.rarity) {
            return false;
          }

          if (filters.isDrinking && !card.forDrinkers) {
            return false;
          }

          if (!filters.isDrinking && !card.forNonDrinkers) {
            return false;
          }

          if (filters.restrictTo && card.type !== filters.restrictTo) {
            return false;
          }

          // Is a spell card currently in play. If so, remove all other spells.
          if (filters.isSpellActive && card.type === 'spell') {
            return false;
          }

          // Finally return false if the card matches the previous card drawn.
          return card !== filters.previousCard;
        });

        return filteredCards;
      }

      function getRandomArrayItem(array) {
        var length = array ? array.length : 0;
        var index = Math.floor(Math.random() * length);
        return array[index];
      }

      function tempCardsArray() {

        //Card definition
        /*
        {
          creator: Plain string - who created the idea for this card

          created: Date created

          forDrinkers: Boolean - if this card should appear for drinkers (Optional)

          forNonDrinkers: Boolean - if this card should appear for non-drinkers (Optional)

          deck: String - The deck / set / expansion that this card came from
                [core, W&W, popCulture, nudity, orgasmic]

          rarity: String - the rarity level of this card
                [basic(Do not edit these), regular, limited, special, rare]

          type: String - The type of card
                [action, challenge, spell, curse, trait, dare, ability, global]

          duration: Number - If the card should last for X rounds, primarily for use with Spells. (Optional)

          title: String - The title of the card. Limited to X characters

          flavour: String - humerous flavour text for the card, themed around the card name or rules (Optional)

          rules: Array[String] - List of instructions to do for the card (Optional)

          primaryRule: {
            //TODO: NOTE Drinking Rule restrictions:
            //    Only ONE primary rule can be applied.
            //    ONLY ONE secondary rule can be applied of each drinkStatus (hideFromDrinkers / nonDrinkers must be set on BOTH
            //        secondary rules for them to be applied, otherwise only one can be set.)

            hideFromDrinkers: Boolean - hide if this rule shouldn't be seen for drinkers
            hideFromNonDrinkers: Boolean - hide if this rule shouldn't be seen for non drinkers
            type: String - What type of rule is this
                  [Mandatory, success, failure, conditional, dare, truth]
            value: String - How many drinks, or the action that needs to be performed (eg: two, or skull, or fetch)
            action: String - What the rule is
                  [drink, skull, fetch, perform, remove?(clothes)]
            person: String - Who this rule applies to
                  [you, someone, everyone]
            instruction: rray[String] - A brief instruction/istruction of the rule (ie: choose someone, everyone wearing X
          }

          secondaryRule: { TODO: Convert this to an array so we can have 2 secondary rules MAX on a card.
            ^^^^ same as primary rule.
          }
        }
         */

        return [
          // ------------- BASIC
          {
            creator: 'Jake Turner',
            created: '08/05/2016',
            deck: 'W&W',
            rarity: 'basic',
            forDrinkers: true,
            card: 'default',
            type: 'action',
            image: 'the-witchs-cauldron',
            helpText: ['If The Witch\'s Cauldron does not exist, create it by placing an empty cup in the middle.'],
            title: 'The Witch\'s Cauldron',
            flavour: 'One toad\'s tongue with an owl\'s lung. Three cigarette butts and two squirrel nuts. Brew them for a bit, then skull that shit.',
            rules: ['Pour two shots of your drink into the cauldron.'],
            boldRules: [{instruction:'If the cauldron is full, skull it.'}]
          },
          {
            creator: 'Jake Turner',
            created: '08/05/2016',
            forNonDrinkers: true,
            deck: 'core',
            rarity: 'basic',
            type: 'action',
            card: 'default',
            image: 'fetch',
            title: 'Fetch!',
            flavour: 'Who\'s a good doggy? You\'re a good doggy!',
            rules: ['Pass the cup to your left, play continues while you\'re gone.'],
            boldRules: [{instruction:'If anyone wants a drink, you fetch it.'}]
          },
          // ------------ regular
          {
            creator: 'Jake Turner',
            created: '08/05/2016',
            forDrinkers: true,
            deck: 'core',
            card: 'default',
            image: 'drink-two',
            rarity: 'regular',
            type: 'action',
            title: 'Sharing is caring',
            flavour: 'Nobody wants to drink alone.',
            rules: ['Choose a friend to share your losing experience.'],
            boldRules: [{instruction:'You both drink two.'}]
          },
          {
            creator: 'Jake Turner',
            created: '08/05/2016',
            forDrinkers: true,
            deck: 'core',
            rarity: 'regular',
            type: 'action',
            card: 'default',
            image: 'drink-one',
            title: '',
            boldRules: [{instruction:'You drink one.'}]
          },
          {
            creator: 'Jake Turner',
            created: '08/05/2016',
            forDrinkers: true,
            deck: 'core',
            rarity: 'regular',
            type: 'action',
            card: 'default',
            image: 'drink-two',
            title: '',
            boldRules: [{instruction:'You drink two.'}]
          },
          {
            creator: 'Jake Turner',
            created: '08/05/2016',
            forDrinkers: true,
            deck: 'core',
            rarity: 'regular',
            type: 'action',
            card: 'default',
            image: 'delegate',
            title: 'Delegate',
            flavour: 'It\'s a hard job, but someone has to do it. Time to delegate.',
            boldRules: [{instruction:'Choose someone to drink two.'}]
          },
          {
            creator: 'Jake Turner',
            created: '08/05/2016',
            forDrinkers: true,
            deck: 'core',
            rarity: 'regular',
            type: 'action',
            card: 'default',
            image: 'give-and-take',
            title: 'Give and take',
            boldRules: [
              {
                instruction: 'Give someone two drinks.'
              }, {
                instruction: 'You take one.'
              }
            ],
            flavour: 'You\'re going down, but at least you\'re taking someone with you.'
          },
          {
            creator: 'Jake Turner',
            created: '08/05/2016',
            forDrinkers: true,
            deck: 'core',
            rarity: 'regular',
            type: 'challenge',
            card: 'challenge',
            image: 'trick-shot',
            title: 'Trick Shot',
            rules: ['Take a shot, bouncing the ball off the wall, ceiling, floor or other ’tricky’ surface.'],
            flavour: 'Bend it like Beckham.',
            boldRules: [
              {
                type: 'success',
                instruction: 'Choose someone to skull.'
              },
              {
                type: 'failure',
                instruction: 'You drink two.'
              }
            ]
          },
          {
            creator: 'Jake Turner',
            created: '08/05/2016',
            forDrinkers: true,
            deck: 'core',
            rarity: 'regular',
            type: 'challenge',
            card: 'challenge',
            image: 'rim-job',
            title: 'Rim Job',
            rules: ['Take a normal shot. The ball must circle the cup rim before falling in.'],
            flavour: 'Be careful. It\'s an unfriendly rim.',
            boldRules: [
              {
                type: 'success',
                instruction: 'Choose someone to skull.'
              },
              {
                type: 'failure',
                instruction: 'You drink two.'
              }
            ]
          },
          {
            creator: 'Jake Turner',
            created: '08/05/2016',
            forDrinkers: true,
            deck: 'core',
            rarity: 'regular',
            type: 'challenge',
            card: 'challenge',
            image: 'flip-cup',
            title: 'Flip Cup',
            rules: ['Place the cup upside down, half off the table with the ball behind it.', 'Flip the cup, landing it over the ball.'],
            flavour: '',
            boldRules: [
              {
                type: 'success',
                instruction: 'Choose someone to skull.'
              },
              {
                type: 'failure',
                instruction: 'You drink two.'
              }
            ]
          },
          {
            creator: 'Jake Turner',
            created: '08/05/2016',
            forDrinkers: true,
            deck: 'core',
            rarity: 'regular',
            type: 'challenge',
            card: 'challenge',
            image: 'looks-can-kill',
            title: 'Looks can Kill',
            rules: ['Enter into a staring contest with another player of your choosing.'],
            flavour: '',
            boldRules: [
              {
                type: 'success',
                instruction: 'Your opponent drinks three.'
              },
              {
                type: 'failure',
                instruction: 'You drink three.'
              }
            ]
          },
          {
            creator: 'Jake Turner',
            created: '08/05/2016',
            forDrinkers: true,
            deck: 'core',
            rarity: 'regular',
            card: 'default',
            image: 'return-to-sender',
            type: 'action',
            title: 'Return to sender',
            flavour: 'Must have got lost in transit.',
            rules: ['Return the cup to the last person who passed it to you this round.'],
            boldRules: [{
              instruction: 'They drink two.'
            }, {
              instruction: 'If no one passed it to you this round, skull your drink.'
            }]
          },
          {
            creator: 'Jake Turner',
            created: '08/05/2016',
            forNonDrinkers: true,
            forDrinkers: true,
            card: 'default',
            image: 'the-wizards-hat',
            deck: 'W&W',
            rarity: 'regular',
            type: 'trait',
            title: 'The Wizard\'s hat',
            flavour: 'With great power, comes great responsibility.',
            rules: ['You don the wizard’s hat.',
              'If there are any disputes on rules or who had the cup when the timer went off, you decide.'],
            boldRules: [
              {hideFromNonDrinkers: true,
              instruction: 'You drink two.'}
            ]
          },

          {
            creator: 'Jake Turner',
            created: '08/05/2016',
            forNonDrinkers: true,
            forDrinkers: true,
            card: 'default',
            image: '', // todo add img
            deck: 'popCulture',
            rarity: 'regular',
            type: 'trait',
            title: 'He who must not be named',
            flavour: '',
            rules: ['Anyone that says your name, or an abbreviation of it must drink.'],
            boldRules: [
              {hideFromNonDrinkers: true,
                instruction: 'You drink two.'}
            ]
          },
          {
            creator: 'Jake Turner',
            created: '08/05/2016',
            forNonDrinkers: true,
            deck: 'core',
            rarity: 'regular',
            card: 'default',
            image: 'singing-cow',
            type: 'action',
            title: 'Moosic to our ears',
            flavour: 'Don\'t have a cow, man.',
            boldRules: [{
              instruction: 'Give us your best bovine imitation.'
            }]
          },
          {
            creator: 'Jake Turner',
            created: '08/05/2016',
            forNonDrinkers: true,
            deck: 'core',
            card: 'default',
            image: 'gift-drink',
            rarity: 'regular',
            type: 'action',
            title: 'Give',
            flavour: 'With some people it\'s all take and no give. But not you! You\'re the generous type.',
            boldRules: [{
              instruction: 'Choose someone to drink two.'
            }]
          },
          {
            creator: 'Jake Turner',
            created: '08/05/2016',
            forDrinkers: true,
            forNonDrinkers: true,
            deck: 'core',
            rarity: 'regular',
            card: 'ability',
            image: 'nosey',
            type: 'ability',
            title: 'You\'re so nosey!',
            rules: ['At any time you may put your finger on your nose.', 'The last person to follow you is punished.'],
            flavour: 'Eyes and ears and mouth and nose.',
            boldRules: [
              {
                instruction: 'You drink two.'
              }, {
                type: 'punishment',
                instruction: 'Drink four.'
              }
            ]
          },
          {
            creator: 'Jake Turner',
            created: '08/05/2016',
            forDrinkers: true,
            forNonDrinkers: true,
            deck: 'core',
            rarity: 'regular',
            card: 'ability',
            image: 'simon-says',
            type: 'ability',
            helpText: ['Don\'t know Simon Says? Just drink and skip this card.'],
            title: 'Simon Says',
            rules: ['At any time you may start a \'Simon Says\' game.', 'The first person(s) to fail is punished.'],
            flavour: 'Simon says drink. Simon says drink. Drink.',
            boldRules: [
              {
                instruction: 'You drink two.'
              }, {
                type: 'punishment',
                instruction: 'Drink four.'
              }
            ]
          },
          {
            creator: 'Jake Turner',
            created: '08/05/2016',
            forDrinkers: true,
            forNonDrinkers: true,
            deck: 'W&W',
            card: 'default',
            image: 'the-witchs-curse',
            rarity: 'regular',
            type: 'curse',
            flavour: 'Think of a curse, and keep it quick. But make it annoying, that\'s the trick.',
            title: 'The Witch\'s Curse',
            rules: ['Create a curse of your choosing.'],
            boldRules: [{
              hideFromNonDrinkers: true,
              instruction: 'You drink two.'
            }]
          },
          {
            creator: 'Jake Turner',
            created: '08/05/2016',
            forDrinkers: true,
            forNonDrinkers: true,
            deck: 'W&W',
            rarity: 'regular',
            type: 'curse',
            card: 'default',
            image: 'anonymous',
            flavour: 'Address without their name to avoid your own shame.',
            title: 'A girl has no name', // Rename this?
            rules: ['You cannot use real or abbreviated names of people playing.'],
            boldRules: [{
              hideFromNonDrinkers: true,
              instruction: 'You drink two.'
            }]
          },
          {
            creator: 'Jake Turner',
            created: '08/05/2016',
            forDrinkers: true,
            forNonDrinkers: true,
            deck: 'W&W',
            rarity: 'regular',
            type: 'curse',
            card: 'default',
            image: 'orgasmic',
            flavour: 'What\'s that sound? You\'re in pleasure. Whenever you moan, be loud for good measure.',
            title: 'Orgasmic',
            rules: ['Before each drink, moan like you mean it.'],
            boldRules: [{
              hideFromNonDrinkers: true,
              instruction: 'You drink two.'
            }]
          },
          {
            creator: 'Jake Turner',
            created: '08/05/2016',
            forDrinkers: true,
            forNonDrinkers: true,
            deck: 'W&W',
            rarity: 'regular',
            type: 'curse',
            card: 'default',
            image: 'no-point',
            flavour: 'Lower your hands and keep them closed, for if fingers point you\'ll be exposed.',
            title: 'What’s the point?',
            rules: ['You cannot point with your fingers.'],
            boldRules: [{
              hideFromNonDrinkers: true,
              instruction: 'You drink two.'
            }]
          },
          {
            creator: 'Jake Turner',
            created: '08/05/2016',
            forDrinkers: true,
            deck: 'core',
            rarity: 'regular',
            type: 'trait',
            card: 'default',
            image: 'lovers-lane',
            title: 'Lovers\' lane',
            flavour: 'You don\'t wanna know how many lovers\' used that bench before you.',
            rules: ['Choose a lover and sit with them.',
              'Whenever one drinks, so does the other.'],
            boldRules: [{
              hideFromNonDrinkers: true,
              instruction: 'Take one drink.'
            }]
          },
          {
            creator: 'Jake Turner',
            created: '08/05/2016',
            forDrinkers: true,
            deck: 'core',
            rarity: 'regular',
            type: 'global',
            card: 'default',
            image: 'spilt-milk',
            title: 'Spilt Milk',
            flavour: 'I guess there\'s a point crying over spilt milk after all.',
            rules: ['You and anyone who has spilt a drink today'],
            boldRules: [{
              instruction: 'Drinks two.'
            }]
          },
          {
            creator: 'Jake Turner',
            created: '08/05/2016',
            forDrinkers: true,
            forNonDrinkers: true,
            deck: 'core',
            rarity: 'regular',
            type: 'trait',
            card: 'default',
            image: 'snake-eyes',
            title: 'Snake Eyes',
            flavour: 'Sssstaring is rude. Sssstop it.',
            rules: ['Anyone you make eye contact with must drink.'],
            boldRules: [{
              hideFromNonDrinkers: true,
              instruction: 'You drink two.'
            }]
          },
          {
            creator: 'Jake Turner',
            created: '08/05/2016',
            forDrinkers: true,
            forNonDrinkers: true,
            deck: 'core',
            rarity: 'regular',
            type: 'trait',
            card: 'default',
            image: '',
            title: 'Spiked Questions',
            flavour: '',
            rules: ['Anyone that answers your question without another question must drink.'],
            boldRules: [{
              hideFromNonDrinkers: true,
              instruction: 'You drink two.'
            }]
          },
          // ------------ limited
          {
            creator: 'Jake Turner',
            created: '08/05/2016',
            forDrinkers: true,
            forNonDrinkers: true,
            deck: 'W&W',
            card: 'default',
            image: 'lead-cup',
            rarity: 'limited',
            type: 'spell',
            duration: 3,
            flavour: 'Adbra kadabra alakazam! From plastic to lead, that\'s what he said.',
            title: 'Lead Cup',
            rules: ['You may only pass left.'],
            boldRules: [{
              hideFromNonDrinkers: true,
              instruction: 'You drink two.'
            }]
          },
          {
            creator: 'Jake Turner',
            created: '08/05/2016',
            forDrinkers: true,
            forNonDrinkers: true,
            deck: 'W&W',
            rarity: 'limited',
            type: 'curse',
            card: 'default',
            image: 'yoda',
            flavour: 'Learn to speak Yoda, you must. Widely accepted language, it is.',
            title: 'Yoda says',
            rules: ['Speak like Yoda, you must.'],
            boldRules: [{
              hideFromNonDrinkers: true,
              instruction: 'You drink three.'
            }]
          },
          {
            creator: 'Jake Turner',
            created: '08/05/2016',
            forDrinkers: true,
            forNonDrinkers: true,
            deck: 'W&W',
            rarity: 'limited',
            type: 'curse',
            card: 'default',
            image: 'tripple-dees',
            flavour: 'Double d\'s are good. Tripple d\'s are bad..',
            title: 'Tripple Dees',
            rules: ['Saying the words Drink, Drank, or Drunk is forbidden.'],
            boldRules: [{
              hideFromNonDrinkers: true,
              instruction: 'You drink three.'
            }]
          },
          {
            creator: 'Jake Turner',
            created: '08/05/2016',
            forDrinkers: true,
            deck: 'core',
            rarity: 'limited',
            card: 'default',
            image: 'drink-three',
            type: 'action',
            title: '',
            boldRules: [{
              instruction: 'You drink three.'
            }]
          },
          {
            creator: 'Jake Turner',
            created: '08/05/2016',
            forDrinkers: true,
            deck: 'core',
            rarity: 'limited',
            card: 'default',
            image: 'drink-four',
            type: 'action',
            title: '',
            boldRules: [{
              instruction: 'You drink four.'
            }]
          },
          {
            creator: 'Jake Turner',
            created: '08/05/2016',
            deck: 'core',
            forNonDrinkers: true,
            rarity: 'limited',
            type: 'action',
            card: 'default',
            image: 'push-up',
            title: 'Drop and gimme',
            flavour: 'Girl look at that body. Girl look at that body. I work out!',
            boldRules: [{
              instruction: 'Perform five push ups.'
            }]
          },
          {
            creator: 'Jake Turner',
            created: '08/05/2016',
            forDrinkers: true,
            forNonDrinkers: true,
            deck: 'W&W',
            rarity: 'limited',
            type: 'spell',
            card: 'default',
            image: 'rewind',
            duration: 3,
            title: 'Rewind',
            rules: ['Instead of passing left, pass to the right.'],
            boldRules: [{
              hideFromNonDrinkers: true,
              instruction: 'You drink three.'
            }]
          },
          {
            creator: 'Jake Turner',
            created: '08/05/2016',
            forDrinkers: true,
            forNonDrinkers: true,
            deck: 'W&W',
            rarity: 'limited',
            type: 'spell',
            card: 'default',
            image: 'free-throw',
            duration: 3,
            flavour: 'He shoots, he scoooooores!',
            title: 'Free throws',
            rules: ['Move the cup to the middle.',
              'Players must shoot the ball in without bouncing.'],
            primaryRule: {
              hideFromNonDrinkers: true,
              instruction: 'You drink three.'
            }
          },
          {
            creator: 'Jake Turner',
            created: '08/05/2016',
            forDrinkers: true,
            deck: 'popCulture',
            rarity: 'limited',
            type: 'global',
            card: 'default',
            image: 'hodor',// todo add img
            title: 'Hold the Door',
            flavour: 'Hodor hodor, hodor. Hodor!?',
            rules: ['Pay tribute to Hodor by giving a eulogy to him, using only his vocabulary.'],
            boldRules: [{instruction:'Everyone toast and drink two.'}]
          },
          {
            creator: 'Jake Turner',
            created: '08/05/2016',
            forDrinkers: true,
            deck: 'core',
            rarity: 'limited',
            type: 'action',
            card: 'default',
            image: 'redemption',
            title: 'Redemption',
            rules: ['You have one shot to redeem yourself.'],
            flavour: 'Careful now. You risk bringing shame upon your family.',
            boldRules: [{
              instruction: 'If you miss, skull your drink.'
            }]
          },
          {
            creator: 'Jake Turner',
            created: '08/05/2016',
            forDrinkers: true,
            deck: 'core',
            rarity: 'limited',
            type: 'action',
            card: 'default',
            image: 'doing-it-wrong',
            helpText: ['Place your lips on the far side of the cup. Tilt your head forward until you can take your drink.'],
            flavour: 'Oops. You\'ve gone full retard. You should never go full retard.',
            title: 'You\'re doing it wrong',
            rules: ['Drink from the opposite side of the cup.'],
            boldRules: [{
              instruction: 'You drink three.'
            }]
          },
          {
            creator: 'Jake Turner',
            created: '08/05/2016',
            forDrinkers: true,
            deck: 'core',
            rarity: 'limited',
            type: 'action',
            card: 'default',
            image: 'rehydrate',
            title: 'Rehydrate',
            rules: ['Slow down, cowboy. You’re looking a little tipsy!',
              'Get excluded from rounds while you drink a glass of water.'],
            flavour: 'Remember kids, always drink responsibly.'
          },
          {
            creator: 'Jake Turner',
            created: '08/05/2016',
            forDrinkers: true,
            deck: 'core',
            rarity: 'limited',
            card: 'default',
            image: 'red-tops-blue-pants',
            type: 'global',
            title: 'Tops are red, pants are blue',
            flavour: 'Lookout! It\'s the fashion police.',
            boldRules: [{
              instruction: 'Anyone wearing these, drinks two with you.'
            }]
          },
          {
            creator: 'Dejan and Dragana',
            created: '08/05/2016',
            forDrinkers: true,
            deck: 'core',
            rarity: 'limited',
            card: 'default',
            image: 'hole-in-one',
            type: 'challenge',
            title: 'A hole in one',
            rules: ['You have one shot. Putt the ball in using your foot from a distance.'],
            flavour: 'Are you too good for your home?!',
            boldRules: [{
              type: 'success',
              instruction: 'Choose someone to skull.'
            },
            {
              type: 'failure',
              instruction: 'You drink three.'
            }]
          },
          {
            creator: 'Jake Turner',
            created: '08/05/2016',
            forNonDrinkers: true,
            forDrinkers: true,
            deck: 'core',
            rarity: 'limited',
            card: 'default',
            image: 'justin-bieber',
            type: 'perform',
            title: 'You\'re a Belieber',
            flavour: 'You can\'t butcher it more than he did.',
            rules: ['Sing the chorus of any Justin Bieber song.'],
            boldRules: [
            {
              hideFromNonDrinkers: true,
              instruction: 'You drink three.'
            }]
          },
          {
            creator: 'Jake Turner',
            created: '08/05/2016',
            forDrinkers: true,
            forNonDrinkers: true,
            deck: 'W&W',
            rarity: 'limited',
            type: 'spell',
            card: 'default',
            image: 'threes-a-crowd',
            duration: 3,
            flavour: 'Balls that play together, stay together.',
            restrict: 'action',
            title: 'Three\'s a crowd',
            rules: ['Add a ball for adjacent players.',
              'When all balls are sunk, pass the cup to anyone.',
              'All ball carriers perform the action.'],
            boldRules: [{
              hideFromNonDrinkers: true,
              instruction: 'You drink three.'
            }]
          },
          {
            creator: 'Jake Turner',
            created: '08/05/2016',
            forDrinkers: true,
            forNonDrinkers: true,
            deck: 'W&W',
            rarity: 'limited',
            type: 'spell',
            card: 'default',
            image: 'multiball',
            duration: 3,
            flavour: 'Nice balls you have there.',
            title: 'Multiball',
            rules: ['Add one ball to the game.',
              'When all balls are sunk, pass the cup to anyone.'],
            boldRules: [{
              hideFromNonDrinkers: true,
              instruction: 'You drink three.'
            }]
          },
          {
            creator: 'Jake Turner',
            created: '08/05/2016',
            forDrinkers: true,
            forNonDrinkers: true,
            deck: 'W&W',
            rarity: 'limited',
            type: 'spell',
            duration: 3,
            card: 'default',
            flavour: 'You. Shall. Not. PASS!',
            image: 'gatekeeper',
            title: 'The gatekeeper',
            rules: ['You are the Gatekeeper and may pass to anyone.',
              'Other players may only pass to you.'],
            boldRules: [{
              hideFromNonDrinkers: true,
              instruction: 'You drink two.'
            }]
          },
          {
            creator: 'Jake Turner',
            created: '08/05/2016',
            forDrinkers: true,
            forNonDrinkers: true,
            deck: 'W&W',
            rarity: 'limited',
            limit: 'action',
            type: 'spell',
            card: 'default',
            flavour: 'Cup hoarders will be punished severely.',
            image: 'double-trouble',
            duration: 3,
            title: 'Double trouble',
            rules: ['To start this spell, give the opposite player a ball and cup.',
              'Continue with two cups in play.'],
            boldRules: [{
              hideFromNonDrinkers: true,
              instruction: 'You drink two.'
            }]
          },
          {
            creator: 'Jake Turner',
            created: '08/05/2016',
            forDrinkers: true,
            forNonDrinkers: true,
            deck: 'core',
            rarity: 'limited',
            limit: 'action',
            card: 'default',
            flavour: 'Three inevitable things: Dying, taxes and someone drinking twice what they had too.',
            image: 'delay',
            duration: 1,
            restrict: 'action',
            type: 'spell',
            title: 'Delay the inevitable',
            rules: ['Only drinkers should participate next round.',
              'Double the values of the card drawn next.']
          },
          {
            creator: 'Tim Weightman',
            created: '08/05/2016',
            forDrinkers: true,
            deck: 'core',
            rarity: 'limited',
            type: 'challenge',
            card: 'challenge',
            image: 'hacky-sack',
            title: 'Hacky Sack',
            rules: ['One chance to bounce the ball off your feet five consecutive times.'],
            flavour: 'Yeah, put put your balls in their mouth!',
            boldRules: [
              {
                type: 'success',
                instruction: 'Choose someone to skull..'
              },
              {
                type: 'failure',
                instruction: 'You drink three.'
              }
            ]
          },

          // ------------ special
          {
            creator: 'Jake Turner',
            created: '08/05/2016',
            forDrinkers: true,
            deck: 'core',
            rarity: 'special',
            card: 'default',
            image: 'drink-five',
            type: 'action',
            title: '',
            boldRules: [{
              instruction: 'You drink five.'
            }]
          },
          {
            creator: 'Jake Turner',
            created: '08/05/2016',
            forDrinkers: true,
            forNonDrinkers: true,
            deck: 'core',
            rarity: 'special',
            type: 'action',
            card: 'default',
            image: 'paralyzed',
            title: 'Paralyzed',
            flavour: 'Your shoulder bone\'s connected to your - wrist bone. O-oh.',
            rules: ['Hold your drink in both hands. Drink without bending your arms.'],
            boldRules: [{
              hideFromNonDrinkers: true,
              instruction: 'You drink three.'
            }]
          },
          {
            creator: 'Jake Turner',
            created: '08/05/2016',
            forDrinkers: true,
            forNonDrinkers: true,
            deck: 'W&W',
            rarity: 'special',
            type: 'spell',
            card: 'default',
            flavour: 'Some call you The Punisher, others call you Bob.',
            image: 'punisher',
            duration: 1,
            title: 'The Punisher',
            rules: ['You are the only person who can play next round.', 'Each time you get the ball in, allocate one drink.'],
            boldRules: [{
              hideFromNonDrinkers: true,
              instruction: 'You drink three.'
            }]
          },
          {
            creator: 'Cute Ben',
            created: '08/05/2016',
            forDrinkers: true,
            forNonDrinkers: true,
            deck: 'W&W',
            rarity: 'special',
            type: 'spell',
            card: 'default',
            flavour: 'Let\'s get ready tooo rummmmmmmble.',
            image: 'duel',
            duration: 1,
            title: 'Duel',
            rules: ['Choose any other player. You may only pass to each other next round.'],
            boldRules: [{
              hideFromNonDrinkers: true,
              instruction: 'You drink three.'
            }]
          },
          {
            creator: 'Jake Turner',
            created: '08/05/2016',
            forDrinkers: true,
            forNonDrinkers: true,
            deck: 'W&W',
            rarity: 'special',
            type: 'curse',
            card: 'default',
            flavour: 'If laughter\'s the best medicine, let\'s hope you\'re not sick.',
            image: 'laughter',
            title: 'Nothing\'s Funny',
            rules: ['laughing is forbidden.'],
            boldRules: [{
              hideFromNonDrinkers: true,
              instruction: 'You drink three.'
            }]
          },
          {
            creator: 'Jake Turner',
            created: '08/05/2016',
            deck: 'core',
            forDrinkers: true,
            rarity: 'special',
            type: 'action',
            card: 'default',
            flavour: 'One have-a-sippy..... Two have-a-sippy..... Three have-a-sippy.',
            image: 'sipping-situp',
            title: 'The sipping sit up',
            boldRules: [{
              instruction:'Perform three sit ups and drink once during each.'
            }]
          },
          {
            creator: 'Jake Turner',
            created: '08/05/2016',
            forDrinkers: true,
            forNonDrinkers: true,
            deck: 'core',
            rarity: 'special',
            type: 'dare',
            card: 'default',
            image: 'twerk',
            title: 'Twerk it like Miley',
            flavour: 'Shake it. Sh-sh-shake it like a polaroid picture.',
            rules: ['Stand up. Face away.', 'Now make Miley proud.'],
            boldRules: [{
                type: 'chicken',
                instruction: ''
              },
              {
                hideFromNonDrinkers: true,
                instruction: 'You drink three.'
              }
            ]
          },
          {
            creator: 'Jake Turner',
            created: '08/05/2016',
            forDrinkers: true,
            deck: 'core',
            rarity: 'special',
            type: 'action',
            title: 'Skull',
            card: 'default',
            image: 'skull',
            flavour: '\'Cause fuck you and fuck your liver, that\'s why.'
          },
          {
            creator: 'Jake Turner',
            created: '08/05/2016',
            forDrinkers: true,
            deck: 'core',
            rarity: 'special',
            type: 'action',
            card: 'default',
            image: 'one-for-all',
            title: 'One for all',
            flavour: 'Your heroic efforts won\'t be forgotten... until this is drawn again.',
            boldRules: [{
              instruction: 'Drink one for each person playing.'
            }]
          },
          {
            creator: 'Jake Turner',
            created: '08/05/2016',
            forDrinkers: true,
            forNonDrinkers: true,
            deck: 'core',
            rarity: 'special',
            type: 'ability',
            card: 'default',
            image: 'jail-free',
            flavour: 'When you have one of those \'Nope!\' moments.',
            title: 'Get out of jail free',
            rules: ['Use this ability to get out of a rule on any card']
          },
          {
            creator: 'Jake Turner',
            created: '08/05/2016',
            forDrinkers: true,
            deck: 'core',
            rarity: 'special',
            type: 'action',
            title: 'Thirsty',
            card: 'default',
            image: 'thirsty',
            flavour: 'We\'re nothing if not conciderate. Let\'s quench that thirst.',
            rules: ['Fill your drink.',
              'When the timer starts next round, start drinking.',
              'Only stop when the timer rings, or you have finished your drink.']
          },
          {
            creator: 'Jake Turner',
            created: '08/05/2016',
            forDrinkers: true,
            deck: 'popCulture',
            rarity: 'special',
            type: 'challenge',
            card: 'default',
            image: 'spicey',
            title: 'Mmmm, Spicey!',
            rules: ['Five seconds to name five spice girls.'],
            flavour: 'Cumin, Paprika, Cinnamon, Nutmeg, Saffron.',
            boldRules: [{
              type: 'success',
              instruction: 'Everyone else drinks five.'
            },
            {
              type: 'failure',
              instruction: 'You skull.'
            }]
          },
          {
            creator: 'Jake Turner',
            created: '08/05/2016',
            forDrinkers: true,
            deck: 'core',
            rarity: 'special',
            type: 'challenge',
            title: 'Kobe!',
            card: 'default',
            image: 'kobe',
            flavour: 'Some guys were born with natural ball skills.',
            rules: ['Place the cup at a distance and take a shot without bouncing.'],
            boldRules: [{
              type: 'success',
              instruction: 'Everybody else drinks two.'
            }, {
              type: 'failure',
              instruction: 'You drink three.'
            }]
          },
          {
            creator: 'Jake Turner',
            created: '08/05/2016',
            forDrinkers: true,
            forNonDrinkers: true,
            deck: 'core',
            rarity: 'special',
            type: 'dare',
            card: 'default',
            image: 'kiss',
            title: 'Smooches',
            rules: ['Kiss the adjacent person on the lips.'],
            flavour: 'Pucker up. This one could be sloppy!',
            boldRules: [{
              type: 'chicken',
              instruction: ''
            },
              {
                hideFromNonDrinkers: true,
                instruction: 'You drink three.'
              }
            ]
          },
          {
            creator: 'Jake Turner',
            created: '08/05/2016',
            forDrinkers: true,
            deck: 'W&W',
            rarity: 'rare',
            type: 'action',
            flavour: 'A little bit of piss and a little bit of poo. Mix it up and there\'s a brew for you.',
            card: 'default',
            image: 'potion',
            title: 'The Witch\'s Potion',
            rules: ['The three players to your left pour a portion of their drink into one cup.',
              'Top it up with your own drink.'],
            boldRules: [{
              instruction: 'Now skull.'
            }]
          },
          {
            creator: 'Jake Turner',
            created: '08/05/2016',
            forDrinkers: true,
            deck: 'core',
            rarity: 'rare',
            type: 'global',
            card: 'default',
            image: 'racist',
            flavour: 'I\'m not really racist. I want you all to drink equally.',
            title: 'That\'s just racist.',
            boldRules: [{
              instruction: 'You, and anyone matching your skin colour, skulls their drink.'
            }]
          },
          {
            creator: 'Jake Turner',
            created: '08/05/2016',
            forDrinkers: true,
            deck: 'core',
            rarity: 'rare',
            type: 'action',
            card: 'default',
            image: 'sharon',
            title: 'Our friend, Sharon',
            flavour: 'Did you hear about what our friend Sharon did with her friend Cory in the chicken shed last Christmas? I hear there were cocks involved!',
            boldRules: [{
              instruction: 'Drink if you know a Sharon.'
            },{
              instruction: 'Skull if you don\'t.'
            }]
          },
          {
            creator: 'Jake Turner',
            created: '08/05/2016',
            forNonDrinkers: true,
            deck: 'core',
            rarity: 'rare',
            type: 'action',
            title: 'Now that\'s hot!',
            card: 'default',
            image: 'chilli',
            flavour: 'Things are really starting to heat up now.',
            rules: ['Find and bite a hot chilli.',
              'If no chilli can be found, take a sip of hot sauce.',
              'If no hot sauce exists, share a hot story from your past.']
          },
          {
            creator: 'Jake Turner',
            created: '08/05/2016',
            forNonDrinkers: true,
            deck: 'core',
            rarity: 'rare',
            type: 'action',
            image: 'gross',
            card: 'default',
            title: 'Host\'s most gross',
            flavour: 'Delicious AND nutritious.',
            rules: ['The host of the house chooses something from their cupboard.',
              'Take a bite of it.']
          },
          {
            creator: 'Jake Turner',
            created: '08/05/2016',
            forDrinkers: true,
            deck: 'core',
            rarity: 'rare',
            type: 'action',
            image: 'two-grills',
            card: 'default',
            title: 'Two grills, one cup',
            rules: ['Pick another person and combine drinks to fill a cup.'],
            boldRules: [{
              instruction: 'Both of you skull by drinking from the cup at the same time.'
            }]
          },
          {
            creator: 'Jake Turner',
            created: '08/05/2016',
            forDrinkers: true,
            deck: 'core',
            rarity: 'rare',
            type: 'global',
            image: 'waterfall',
            card: 'default',
            flavour: '',
            title: 'Waterfall',
            rules: ['Everyone refills their cups.',
              'When timer starts, everyone drinks.',
              'No one stops until the timer stops, even if you control a ball.']
          },
          {
            creator: 'Jake Turner',
            created: '08/05/2016',
            forDrinkers: true,
            deck: 'core',
            rarity: 'rare',
            type: 'global',
            image: 'no-mercy',
            card: 'default',
            title: 'No mercy',
            flavour: 'You\'re drunk, and you\'re drunk. You\'re also drunk. And you, you\'re extra drunk.',
            boldRules: [{
              instruction: 'Everyone skulls.'
            }, {
              instruction: 'Last person to finish skulls another.'
            }]
          },
          {
            creator: 'Jake Turner',
            created: '08/05/2016',
            forDrinkers: true,
            deck: 'core',
            rarity: 'rare',
            type: 'global',
            image: 'apocolypse',    // Todo add img
            card: 'default',
            title: 'Apocolypse',
            flavour: '.',
            boldRules: [{
              instruction: 'Everyone skulls.'
            }]
          },
          {
            creator: 'Jake Turner',
            created: '08/05/2016',
            forDrinkers: true,
            forNonDrinkers: true,
            deck: 'W&W',
            rarity: 'rare',
            type: 'curse',
            card: 'default',
            flavour: 'What good\'s a phone call, if you cannot talk?',
            image: 'mute',
            title: 'Sounds of Silence',
            rules: ['You cannot make any sound with your mouth.'],
            boldRules: [{
              hideFromNonDrinkers: true,
              instruction: 'You skull.'
            }]
          },
          {
            creator: 'Jake Turner',
            created: '08/05/2016',
            forDrinkers: true,
            deck: 'W&W',
            rarity: 'rare',
            type: 'action',
            card: 'default',
            flavour: '',
            image: 'kamikaze',
            title: 'Kamikaze',
            boldRules: [{
              instruction: 'You skull.'
            },{
              instruction: 'Choose someone to skull.'
            }]
          },
          {
            creator: 'Tim Weightman',
            created: '08/05/2016',
            forDrinkers: true,
            deck: 'core',
            rarity: 'rare',
            type: 'challenge',
            card: 'challenge',
            image: 'ball-mouth',
            title: 'Right in the Kisser',
            rules: ['Take a shot, no bouncing, aiming for the mouth of the person opposite.'],
            flavour: 'Yeah, put put your balls in their mouth!',
            boldRules: [
              {
                type: 'success',
                instruction: 'Both people choose others to skull.'
              },
              {
                type: 'failure',
                instruction: 'Both people skull.'
              }
            ]
          }
        ];
      }
    })();
  </script>
</dom-module>
